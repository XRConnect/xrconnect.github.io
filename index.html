<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>í”„ë¡œì íŠ¸ ë“±ë¡</title>
</head>
<body>
  <form id="projectForm">
  <h3>í”„ë¡œì íŠ¸ ì œëª©</h3>
  <input type="text" name="title" required placeholder="ì˜ˆ) XR ìº í˜ì¸">

  <h3>ëª©ì </h3>
  <div class="options" data-group="purpose">
    <div class="option-btn">ë¸Œëœë“œ í™ë³´</div>
    <div class="option-btn">ì œí’ˆ í™ë³´</div>
    <div class="option-btn">ì´ë²¤íŠ¸/í–‰ì‚¬</div>
    <div class="option-btn">ê¸°íƒ€</div>
  </div>

  <h3>ì‚°ì—…</h3>
  <div class="options" data-group="industry">
    <div class="option-btn">ë¦¬í…Œì¼</div>
    <div class="option-btn">ë¬¸í™”/ì˜ˆìˆ </div>
    <div class="option-btn">IT/í†µì‹ </div>
    <div class="option-btn">ê¸°íƒ€</div>
  </div>

  <h3>ì¼ì • & ì˜ˆì‚°</h3>
  <input type="date" name="start_date">
  <input type="date" name="end_date">
  <select name="budget">
    <option>500ë§Œ ì› ì´í•˜</option>
    <option>500ë§Œ ~ 1000ë§Œ ì›</option>
    <option>1000ë§Œ ì› ì´ìƒ</option>
  </select>
  <select name="nda">
    <option>í•„ìš”</option>
    <option>ë¶ˆí•„ìš”</option>
  </select>

  <h3>ë‹´ë‹¹ì ì •ë³´</h3>
  <input type="text" name="name" placeholder="ì´ë¦„" required>
  <input type="email" name="email" placeholder="ì´ë©”ì¼" required>
  <input type="tel" name="phone" placeholder="ì—°ë½ì²˜">
  <input type="text" name="company" placeholder="íšŒì‚¬ëª…">

  <button type="submit">ë“±ë¡í•˜ê¸° â†’</button>
</form>

<style>
  form { font-family: sans-serif; max-width: 500px; margin: 0 auto; }
  h3 { margin-top: 20px; font-size: 16px; }
  input, select { width: 100%; padding: 10px; margin: 8px 0; border: 1px solid #ccc; border-radius: 6px; }
  .options { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 8px; }
  .option-btn { padding: 6px 12px; border: 1px solid #aaa; border-radius: 6px; cursor: pointer; user-select: none; }
  .option-btn.active { background: #000; color: #fff; }
  button { margin-top: 20px; width: 100%; padding: 12px; background: #000; color: #fff; border: none; border-radius: 6px; }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // ì„ íƒ ë²„íŠ¼ í† ê¸€
    document.querySelectorAll('.options').forEach(container => {
      container.addEventListener('click', (ev) => {
        const btn = ev.target.closest('.option-btn');
        if (!btn) return;
        btn.classList.toggle('active');
      });
    });

    // ì œì¶œ ì²˜ë¦¬
    const form = document.getElementById('projectForm');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      // 1) ê¸°ë³¸ ì…ë ¥ê°’ ìˆ˜ì§‘
      const formData = new FormData(form);
      const data = {};
      formData.forEach((v, k) => data[k] = v);

      // 2) ì„ íƒ ë²„íŠ¼ ê°’ ìˆ˜ì§‘
      document.querySelectorAll('.options[data-group]').forEach(container => {
        const key = container.dataset.group;
        const vals = [...container.querySelectorAll('.option-btn.active')]
          .map(x => x.textContent.trim());
        data[key] = vals.join(', ');
      });

      console.log('[SEND DATA]', data);

      // 3) GAS URL (ë°°í¬í•œ ì›¹ ì•± ì£¼ì†Œ)
      const GAS_URL = "https://script.google.com/macros/s/AKfycbxauxN_xD19rAW66gBSc0CwzLMCjQFNPHa0T6q2-wzzwfNcn_zZupIypQXBuSReHq3xzw/exec";

      try {
        // ìš”ì²­ ë³´ë‚´ê¸° (no-cors ëª¨ë“œ â†’ ì‘ë‹µì€ í™•ì¸ ë¶ˆê°€)
        await fetch(GAS_URL, {
          method: 'POST',
          mode: 'no-cors',   // ğŸ‘ˆ ì´ê±° ë•ë¶„ì— Failed to fetch ì•ˆ ëœ¸
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });

        // ì„±ê³µ ë©”ì‹œì§€ ë„ìš°ê¸°
        alert('âœ… ë“±ë¡ ìš”ì²­ ì™„ë£Œ! (ì‹œíŠ¸/Slackì—ì„œ í™•ì¸í•˜ì„¸ìš”)');

        // í¼ ì´ˆê¸°í™”
        form.reset();
        document.querySelectorAll('.option-btn.active').forEach(el => el.classList.remove('active'));
      } catch (err) {
        console.error('[SEND ERROR]', err);
        alert('âš ï¸ ì„œë²„ ì˜¤ë¥˜: ' + err.message);
      }
    });
  });
</script>
</body>
</html>