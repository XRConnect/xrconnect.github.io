<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>XR Connect - 문의</title>
  <style>
    :root{
      --text:#252525; --border:#bbb; --bg:#fff; --dark:#707070; --muted:#707070;
    }
    *{box-sizing:border-box}
    body{ margin:0; background:var(--bg); color:var(--text);
      font-family: Inter; }
    .container{ max-width:1200px; margin:0 auto; }

    /* 공통 레이아웃 */
    .wrap{ display:grid; grid-template-columns: 480px 1fr; gap:48px; align-items:flex-start; }
    .section{ padding:120px 0 40px; }               /* ← 각 섹션 top/bottom 120px */
    .left{ display:flex; align-items:center; gap:16px; width:480px; }
    .step{ width:36px; height:36px; border-radius:50%; background:#252525; color:#fff;
      display:grid; place-items:center; font-weight:700; }
    .left h2{ margin:0; font-size:24px; font-weight:700; letter-spacing:-0.02em; }
    .help{ margin:0 0 16px; color:var(--muted); font-size:14px; }
    .title-wrap{display: flex; flex-direction: column; justify-content: center; align-items: flex-start; gap: 16px;}

    /* 입력 */
    .group label{ display:block; margin-bottom:16px; font-weight:700; font-size:16px; }
    .input{
      width:100%; height:48px; padding:0 16px; font-size:14px;
      border:1px solid var(--border); border-radius:12px; outline:none;
      transition:border-color .15s, box-shadow .15s;
    }
    .input::placeholder{ color:#bbb; }
    .input:focus{ border:2px solid #252525; box-shadow:0 0 0 4px rgba(0,0,0,.06); }

    /* 목적 타일 + 아이콘 (다중 선택) */
    .tiles{ display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:12px; }
    .tile{
      border:1px solid var(--border); border-radius:16px; padding:16px; height:160px;
      display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center;
      cursor:pointer; user-select:none; font-weight:500;
      transition: border-color .15s, background .15s, color .15s, transform .05s;
    }
    .tile:active{ transform: scale(.99); }
    .tile .icon{ display:inline-flex; align-items:center; justify-content:center; width:56px; height:57px; margin-bottom:8px; }
    .tile .icon img{ width:100%; height:100%; object-fit:contain; vertical-align:middle; }
    .tile .label{ font-size:16px; }
    .tile.active{ background:#252525; color:#fff; border-color:#252525; }

    /* 칩(산업/콘텐츠/디바이스) */
    .chips{ display:flex; flex-wrap:wrap; gap:8px; }
    .chip{
      border:1px solid var(--border); border-radius:999px; padding:12px 16px; cursor:pointer; user-select:none;
      font-weight:500; font-size:14px; line-height:1;
      transition: border-color .15s, background .15s, color .15s, transform .05s;
    }
    .chip:active{ transform: scale(.98); }
    .chip.active{ background:#252525; color:#fff; border-color:#707070; }

    .group{ margin-bottom:56px; }
    .group h3{ font-size:16px; font-weight:700; margin-top: 0 !important; }
    .textarea{ width:100%; min-height:120px; padding:16px; border:1px solid var(--border); border-radius:16px; font-family: inter; font-size: 14px; }
    .textarea::placeholder{ color:#bbb; }
    .textarea:focus{ border-color:#252525; box-shadow:0 0 0 4px rgba(0,0,0,.06); }

    /* 하단 CTA */
    .cta-bar{ position:relative; left:0; right:0; bottom:0; background:var(--dark); z-index:50; }
    .cta{
      width:100%; background:#252525; color:#fff; font-size:24px; font-weight:700;
      display:flex; align-items:center; justify-content:center; gap:8px; padding: 24px 40px; cursor:pointer;
    }
    .cta .icon{ width:26px; height:26px; border:1px solid #fff; border-radius:9999px;
      display:inline-flex; align-items:center; justify-content:center; font-size:14px; line-height:1; }
    .cta:disabled{ opacity:.6; cursor:not-allowed; }

    @media (max-width: 1000px){ .wrap{ grid-template-columns: 1fr; gap:24px; } .left{ width:auto; } }
    @media (max-width: 640px){ .tiles{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
  </style>
</head>
<body>
  <div class="container">
    <form id="titleForm">
      <!-- 1) 제목 -->
      <section class="wrap section" aria-label="프로젝트 제목 입력">
        <div class="left" aria-hidden="true">
          <div class="step">1</div>
          <h2>프로젝트 제목을 입력하세요</h2>
        </div>
        <div class="right">
          <div class="group">
            <label for="title">프로젝트 제목</label>
            <input id="title" name="title" class="input" required placeholder="예) 뉴미디어 XR 캠페인" autocomplete="off" />
          </div>
        </div>
      </section>

      <!-- 2) 목적: 아이콘 + 텍스트, 다중 선택 -->
      <section class="wrap section" aria-label="프로젝트의 유형 선택">
        <div class="left" aria-hidden="true" style="align-items: flex-start;">
          <div class="step">2</div>
          <div class="title-wrap">
           <h2>프로젝트의 유형을 선택하세요</h2>
           <p class="help">프로젝트와 관련이 높은 카테고리를 선택해 주세요.</p>
          </div>
        </div>

        <div class="right">
          <div class="group" data-name="purpose" data-multi="true">
            <h3>목적</h3>
            <div class="tiles">
              <div class="tile" data-value="브랜드 홍보"><span class="icon"><img src="https://raw.githubusercontent.com/XRConnect/XR-Connect---Assets/main/brand.svg" alt="brand" width="56" height="57" loading="lazy" decoding="async"/></span><span class="label">브랜드 홍보</span></div>
              <div class="tile" data-value="제품 홍보"><span class="icon"><img src="https://raw.githubusercontent.com/XRConnect/XR-Connect---Assets/main/product.svg" alt="product" width="56" height="57" loading="lazy" decoding="async"/></span><span class="label">제품 홍보</span></div>
              <div class="tile" data-value="이벤트 / 행사"><span class="icon"><img src="https://raw.githubusercontent.com/XRConnect/XR-Connect---Assets/main/event.svg" alt="event" width="56" height="57" loading="lazy" decoding="async"/></span><span class="label">이벤트/행사</span></div>
              <div class="tile" data-value="디지털 트윈"><span class="icon"><img src="https://raw.githubusercontent.com/XRConnect/XR-Connect---Assets/main/digitaltwin.svg" alt="digitaltwin" width="56" height="57" loading="lazy" decoding="async"/></span><span class="label">디지털 트윈</span></div>
              <div class="tile" data-value="미디어 아트"><span class="icon"><img src="https://raw.githubusercontent.com/XRConnect/XR-Connect---Assets/main/mediaart.svg" alt="mediaart." width="56" height="57" loading="lazy" decoding="async"/></span><span class="label">미디어 아트</span></div>
              <div class="tile" data-value="AI 콘텐츠"><span class="icon"><img src="https://raw.githubusercontent.com/XRConnect/XR-Connect---Assets/main/ai.svg" alt="ai" width="56" height="57" loading="lazy" decoding="async"/></span><span class="label">AI 콘텐츠</span></div>
              <div class="tile" data-value="기타"><span class="icon"><img src="https://raw.githubusercontent.com/XRConnect/XR-Connect---Assets/main/etc.svg" alt="etc" width="56" height="57" loading="lazy" decoding="async"/></span><span class="label">기타</span></div>
            </div>
          </div>

          <!-- 산업 (다중 선택) -->
          <div class="group" data-name="industries" data-multi="true">
            <h3>산업</h3>
            <div class="chips">
              <div class="chip" data-value="리테일/패션">리테일 / 패션</div>
              <div class="chip" data-value="디지털/가전">디지털 / 가전</div>
              <div class="chip" data-value="인테리어/가구">인테리어 / 가구</div>
              <div class="chip" data-value="문화/예술/전시">문화 / 예술 / 전시</div>
              <div class="chip" data-value="모빌리티/자동차">모빌리티 / 자동차</div>
              <div class="chip" data-value="엔터테인먼트">엔터테인먼트</div>
              <div class="chip" data-value="건설/부동산">건설 / 부동산</div>
              <div class="chip" data-value="제약/의료/헬스케어">제약 / 의료 / 헬스케어</div>
              <div class="chip" data-value="교육/훈련">교육 / 훈련</div>
              <div class="chip" data-value="제조/생산">제조 / 생산</div>
              <div class="chip" data-value="IT/통신/환경">IT / 통신 / 환경</div>
              <div class="chip" data-value="관광/레저/스포츠">관광 / 레저 / 스포츠</div>
              <div class="chip" data-value="공공/행정/국방">공공 / 행정 / 국방</div>
              <div class="chip" data-value="기타">기타</div>
            </div>
          </div>

          <!-- 콘텐츠 (다중 선택) -->
          <div class="group" data-name="contents" data-multi="true">
            <h3>콘텐츠</h3>
            <div class="chips">
              <div class="chip" data-value="3D 그래픽">3D 그래픽</div>
              <div class="chip" data-value="3D 스캔">3D 스캔</div>
              <div class="chip" data-value="360 실사촬영">360 실사촬영</div>
              <div class="chip" data-value="AI 콘텐츠">AI 콘텐츠</div>
              <div class="chip" data-value="기타">기타</div>
            </div>
          </div>

          <!-- 디바이스 (다중 선택) -->
          <div class="group" data-name="devices" data-multi="true">
            <h3>디바이스</h3>
            <div class="chips">
              <div class="chip" data-value="PC">PC</div>
              <div class="chip" data-value="모바일">모바일</div>
              <div class="chip" data-value="HMD">HMD</div>
              <div class="chip" data-value="키오스크">키오스크</div>
              <div class="chip" data-value="사이니지">사이니지</div>
              <div class="chip" data-value="프로젝터">프로젝터</div>
              <div class="chip" data-value="기타">기타</div>
            </div>
          </div>

          <!-- 자유 입력 -->
          <div class="group">
            <h3>다른 궁금하신 내용이 있으시면 입력해주세요</h3>
            <textarea class="textarea" name="note" placeholder="내용을 입력해주세요."></textarea>
          </div>

          <!-- 숨은 필드: 선택값 CSV -->
          <input type="hidden" name="purpose" />
          <input type="hidden" name="industries" />
          <input type="hidden" name="contents" />
          <input type="hidden" name="devices" />
        </div>
      </section>
    </form>
  </div>

  <!-- 하단 100% 등록하기 버튼 -->
  <div class="cta-bar">
    <button id="submitBtn" class="cta" form="titleForm" type="submit">
      등록하기 <span class="icon">→</span>
    </button>
  </div>

  <script>
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbydgL1hWh_ZKbJdkLB_K8le1DG8jAKXgx6oe1loNZjff2lA8zadYBpkycmXmmm85PkV1A/exec';
    const form = document.getElementById('titleForm');
    const submitBtn = document.getElementById('submitBtn');

    // 선택 로직(타일/칩 공통) + 숨은 필드 동기화
    function updateHiddenFromGroup(group){
      const name = group.dataset.name;
      if (!name) return;
      const multi = group.dataset.multi === 'true';
      const active = [...group.querySelectorAll('.tile.active, .chip.active')].map(el => el.dataset.value);
      const hidden = form.querySelector(`input[name="${name}"]`);
      if (hidden) hidden.value = multi ? active.join(', ') : (active[0] || '');
    }
    function initSelectable(){
      document.querySelectorAll('.group[data-name]').forEach(group => {
        group.addEventListener('click', (e)=>{
          const el = e.target.closest('.tile, .chip');
          if (!el) return;
          const multi = group.dataset.multi === 'true';
          if (multi) el.classList.toggle('active');
          else { group.querySelectorAll('.tile.active, .chip.active').forEach(n => n.classList.remove('active')); el.classList.add('active'); }
          updateHiddenFromGroup(group);
        });
      });
    }
    initSelectable();

    // 제출
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      if (!form.reportValidity()) return;

      // 제출 직전 동기화(안전망)
      document.querySelectorAll('.group[data-name]').forEach(updateHiddenFromGroup);

      submitBtn.disabled = true;
      try {
        const params = new URLSearchParams(new FormData(form)); // x-www-form-urlencoded
        const res = await fetch(SCRIPT_URL, { method:'POST', body: params });
        let data = null; try { data = await res.json(); } catch(_) {}
        if (!res.ok || (data && data.ok === false)) {
          const msg = (data && data.error) ? data.error : 'Network or server error';
          throw new Error(msg);
        }
        alert('등록되었습니다. 감사합니다!');
        form.reset();
        document.querySelectorAll('.tile.active, .chip.active').forEach(n => n.classList.remove('active'));
      } catch (err) {
        console.error(err);
        alert('전송 실패: ' + err.message);
      } finally {
        submitBtn.disabled = false;
      }
    });
  </script>
</body>
</html>
